DOCKER_ENV=false

RELAY_NAME="Swarm"
RELAY_PUBKEY="8ad8f1f78c8e11966242e28a7ca15c936b23a999d5fb91bfe4e4472e2d6eaf55"
RELAY_DESCRIPTION="Swarm Hivetalk Team Relay"

TEAM_DOMAIN="swarm.hivetalk.org" # Optional: Domain where the relay / site is served
NPUB_DOMAIN="hivetalk.org" # Optional: Domain that hosts .well-known/nostr.json (falls back to public/.well-known/nostr.json if not set)

DB_ENGINE="postgres"
# DB_ENGINE="badger" # lmdb, badger, postgres (default: postgres)
# DB_PATH="db/" # only required for badger and lmdb

# Option 1: FOR POSTGRES ONLY: Use DATABASE_URL (takes precedence if set)
DATABASE_URL=postgres://swarm:password@localhost:5437/relay?sslmode=disable

# Option 2: Use individual postgres variables (used if DATABASE_URL is not set)
# POSTGRES_USER=swarm
# POSTGRES_PASSWORD=password
# POSTGRES_DB=relay
# POSTGRES_HOST=localhost
# POSTGRES_PORT=5437

RELAY_PORT="3334"

BLOSSOM_ENABLED="false"
BLOSSOM_PATH="blossom/"
BLOSSOM_URL="http://localhost:3334"

WEBSOCKET_URL="wss://localhost:3334"

# Relay Kind Filtering
# ALLOWED_KINDS: Restricted to team members only (blank = allow all kinds for team members)
# PUBLIC_ALLOWED_KINDS: Any pubkey can post these kinds (blank = public cannot post, only team members)
# Specify comma-separated list of allowed kinds
# Examples:
#   ALLOWED_KINDS="" (allow all kinds for team members)
#   ALLOWED_KINDS="0,1,5,10002,30311" (only allow specific kinds for team members)
#   PUBLIC_ALLOWED_KINDS="1,6,7" (allow any pubkey to post text notes, reposts, reactions)
ALLOWED_KINDS=""
PUBLIC_ALLOWED_KINDS= # (blank = public cannot post, only team members)

# Trusted client override
# Events from this client (via ["client","<name>"] tag) are allowed for the
# configured kinds even if the pubkey is not in nostr.json
# Set TRUSTED_CLIENT_KINDS="all" to allow any kind from the trusted client or as comma separated list of kinds
TRUSTED_CLIENT_NAME=""
TRUSTED_CLIENT_KINDS="all" 

# Maximum file upload size in MB (default: 200)
MAX_UPLOAD_SIZE_MB=200

# Allowed hosts for the /mirror endpoint (SSRF protection)
# Leave blank to disable the mirror endpoint entirely
# Specify comma-separated list of allowed hosts (with port if non-standard)
# Examples:
#   ALLOWED_MIRROR_HOSTS="blossom.example.com,cdn.example.org"
#   ALLOWED_MIRROR_HOSTS="blossom.primal.net,cdn.satellite.earth"
ALLOWED_MIRROR_HOSTS=

# Storage Backend Configuration
# STORAGE_BACKEND: "filesystem" (default) or "s3"
# Use "filesystem" for local storage (BLOSSOM_PATH)
# Use "s3" for S3-compatible storage (Tigris, AWS S3, MinIO, etc.)
STORAGE_BACKEND="filesystem"

# S3/Tigris Configuration (only required when STORAGE_BACKEND="s3")
# For Tigris on Fly.io: https://fly.storage.tigris.dev
# For Tigris outside Fly.io: https://t3.storage.dev
# For AWS S3: https://s3.amazonaws.com
S3_ENDPOINT=""
S3_BUCKET=""
S3_REGION="auto"

# AWS Credentials (required for S3 storage)
# For Tigris, get these from your Tigris dashboard or fly secrets
AWS_ACCESS_KEY_ID=""
AWS_SECRET_ACCESS_KEY=""

# S3 Public URL (optional, for CDN/redirect optimization)
# If set, blob requests will redirect to this URL instead of streaming through the relay
# Example for Tigris: https://fly.storage.tigris.dev/your-bucket
# Example for CloudFront: https://d123456789.cloudfront.net
S3_PUBLIC_URL=""

# NIP-05 Service Configuration
# NIP05_PATH: Path to nostr.json file (default: public/.well-known/nostr.json)
#   - In Docker: Use /app/public/.well-known/nostr.json
#   - In local dev: Use public/.well-known/nostr.json
NIP05_PATH="public/.well-known/nostr.json"
